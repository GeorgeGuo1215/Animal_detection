# 🚀 Web版启动说明

## 快速启动

### 方法1: 直接打开（推荐）
1. 双击 `index.html` 文件
2. 系统会自动用默认浏览器打开
3. 开始使用！

### 方法2: 本地服务器（推荐用于开发）
如果遇到跨域问题，可以启动本地服务器：
wode
#### Python 3
```bash
cd web
python -m http.server 8000
```
然后访问: http://localhost:8000

#### Python 2
```bash
cd web
python -m SimpleHTTPServer 8000
```

#### Node.js
```bash
cd web
npx http-server -p 8000
```

#### PHP
```bash
cd web
php -S localhost:8000
```

## 📶 蓝牙实时数据接口（新功能）

系统现在提供**两个独立的数据接口**：

### 🔹 蓝牙实时数据接口
通过蓝牙接收实时雷达数据，**可连接任何蓝牙设备**：

1. 打开Web应用（建议使用本地服务器 `http://localhost:8000`）
2. 页面顶部有"📶 蓝牙实时数据接口"模块
3. 点击"连接蓝牙"，系统会扫描所有可用的蓝牙设备
4. 选择你的设备，系统会自动发现所有服务和特征
5. 连接成功后会显示：
   - ✅ 实时数据流监控
   - ✅ 原始数据打印（实时滚动显示）
   - ✅ 数据点计数和连接时长
   - ✅ 当前心率和呼吸频率
6. 点击"显示蓝牙图表"可查看专用的实时图表

**蓝牙接口特性**：
- 🔥 **实时数据打印** - 显示原始接收数据
- 📊 **专用图表** - 独立的蓝牙数据图表区域
- ⏱️ **连接监控** - 显示连接时长和数据统计
- 🔴 **实时录制** - 参考main.py的录制逻辑，一键开始/结束录制
- 💾 **自动保存** - 录制结束后自动下载.txt文件
- 🔄 **数据清空** - 重置所有实时数据

**录制功能特点**：
- ✅ **同步录制** - 每个数据点实时写入缓存
- ✅ **一键操作** - 绿色"开始记录"，红色"结束记录"按钮
- ✅ **视觉反馈** - 录制时按钮闪烁提醒
- ✅ **自动命名** - 按时间戳自动生成文件名
- ✅ **数据格式** - 与main.py完全兼容的保存格式

### 🔹 文件上传数据接口
传统的文件上传和批量处理：

1. 选择并上传.txt数据文件
2. 批量处理多个文件
3. 生成综合分析报告
4. 导出处理结果

**设备兼容性**：
- ✅ 支持所有蓝牙设备（不限于特定协议）
- ✅ 自动发现和连接所有可通知的特征
- ✅ 详细的服务和特征信息显示
- ✅ 智能适配NUS、自定义服务等各种协议

**数据格式支持**：
- 文本行：`timestamp i_value q_value`
- JSON行：`{"ts":..., "i":..., "q":...}`
- 连续数值：`1.6421.588`（自动拆分为1.642和1.588）

**实时数据示例**：
连接后你会看到类似以下的实时数据流：
```
[14:25:31] 1.6421.588
[14:25:31] 1.6551.601  
[14:25:31] 1.6701.615
[14:25:32] {"ts":1640000000,"i":1.682,"q":1.625}
```

### 📝 实时录制功能使用方法

**开始录制**：
1. 连接蓝牙设备后，点击绿色的"开始记录数据"按钮
2. 按钮变为红色"结束记录数据"，并开始闪烁提示录制中
3. 日志显示：🔴 开始录制数据 - 2025-01-20-15-30

**录制中**：
- 每个接收的数据点都会实时保存到内存缓存
- 录制状态一目了然：红色闪烁按钮
- 可以同时查看实时图表和数据流

**结束录制**：
1. 再次点击红色的"结束记录数据"按钮
2. 系统自动下载.txt文件到本地
3. 文件命名格式：`bluetooth_record_2025-01-20-15-30.txt`
4. 日志显示录制统计：时长、数据点数量

**保存的数据格式**（与main.py兼容）：
```
2025-01-20 15:30:01  1.642  1.588
2025-01-20 15:30:01  1.655  1.601
2025-01-20 15:30:01  1.670  1.615
```

## 🧪 测试数据

项目包含了一个测试数据文件 `test_data.txt`，你可以用它来测试系统功能：

1. 打开Web应用
2. 点击"选择文件"或拖拽 `test_data.txt` 到上传区域
3. 点击"开始处理"
4. 查看处理结果

## 📁 文件说明

- `index.html` - 主页面，双击即可打开
- `style.css` - 样式文件
- `app.js` - 主应用逻辑
- `radar-processor.js` - 雷达数据处理算法
- `fft.js` - FFT变换实现
- `test_data.txt` - 测试数据文件
- `README.md` - 详细使用说明

## ⚠️ 注意事项

1. **浏览器兼容性**: 
   - **蓝牙功能**: 必须使用Chrome或Edge浏览器（Web Bluetooth支持）
   - **访问方式**: 建议使用本地服务器（`http://localhost:8000`）而非直接打开文件
   - Firefox和Safari对Web Bluetooth支持有限
2. **文件格式**: 只支持.txt格式的数据文件
3. **数据格式**: 每行包含时间戳、I通道数据、Q通道数据，用空格分隔
4. **文件大小**: 建议单个文件不超过10MB
5. **蓝牙连接**: 如遇连接问题，请刷新页面后重试

## 🔧 如果遇到问题

1. **页面无法加载**: 检查网络连接，确保能访问CDN资源
2. **文件上传失败**: 检查文件格式和大小
3. **处理结果异常**: 检查数据文件格式是否正确
4. **图表不显示**: 刷新页面或检查浏览器控制台错误

## 📞 获取帮助

- 查看浏览器控制台 (F12) 获取详细错误信息
- 参考 `README.md` 获取完整使用说明
- 使用提供的测试数据验证系统功能

---

**开始体验毫米波雷达数据处理系统Web版！** 🎉




