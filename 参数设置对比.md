# Web端与Python端参数设置对比

本文档对比了毫米波雷达项目中Web前端和Python后端的参数设置。

## 1. 采样和数据长度参数

| 参数 | Web端 (app.js) | Python端 (main.py) | Python端 (data_processor.py) | 说明 |
|------|----------------|-------------------|----------------------------|------|
| 采样率 | `samplingRate = 50` (固定) | `fs = 100` | `sampling_rate=100` | 采样频率(Hz) |
| 短数据长度 | - | `n = 1000` | `n_short = 1000` | 短数据段长度 |
| 长数据长度 | - | `N = 2000` | `N_long = 2000` | 长数据段长度 |

## 2. 心率和呼吸参数

| 参数 | Web端 (app.js) | Python端 (main.py) | 说明 |
|------|----------------|-------------------|------|
| 心率变化阈值 | `heartRateDelta = 5` | `heart_delta = 5` | 心率最大变化幅度(bpm) |
| 心率历史长度 | `historyMaxLength = 200` | `heart_history_short` (200个值) | 固定200个心率历史值 |
| 默认心率 | `lastStableHeartRate = 70` | - | 上次稳定的心率值(bpm) |
| 默认呼吸率 | `lastStableRespRate = 18` | - | 上次稳定的呼吸频率(bpm) |

## 3. 缓冲区和窗口参数

| 参数 | Web端 (app.js) | Python端 | 说明 |
|------|----------------|----------|------|
| BLE缓冲区长度 | `bleMaxBuffer = 5000` | - | 逻辑窗口长度 |
| BLE硬缓冲区限制 | `bleMaxBufferHard = 5200` | - | 硬限制缓冲区大小 |
| 自适应稳定阈值 | `adaptiveStabilizeThreshold = 30` | - | 稳定前需要的样本数 |
| 自适应稳定窗口 | `adaptiveStabilizeWindow = 50` | - | 检测稳定的窗口大小 |

## 4. BLE和上传参数

| 参数 | Web端 (app.js) | Python端 | 说明 |
|------|----------------|----------|------|
| BLE上传间隔 | `bleUploadIntervalSec = 10` | - | BLE数据上传间隔(秒) |
| BLE上传窗口 | `bleUploadWindowSec = 10` | - | BLE数据上传窗口(秒) |
| 图表刷新间隔 | `_bleChartMinIntervalMs = 100` | - | 图表最小刷新间隔(毫秒) |
| 记录标志 | `bleRecordingFlag = 0` | `flag_record = 0` | 数据记录状态 |

## 5. 算法参数

| 参数 | Web端 | Python端 (data_processor.py) | 说明 |
|------|-------|-----------------------------|------|
| 圆拟合最大迭代 | - | `IterMax = 40` | 圆拟合算法最大迭代次数 |
| 收敛精度 | - | `epsilon = 1e-12` | 圆拟合收敛阈值 |

## 6. 状态标志参数

| 参数 | Web端 | Python端 (main.py) | 说明 |
|------|-------|-------------------|------|
| 导入模式标志 | - | `flag_import_mode = 0` | 0:实时模式, 1:导入模式 |
| 保持标志 | - | `flag_hold = 0` | 数据保持状态 |
| 状态标志 | - | `flag_state = 1` | 系统状态标志 |
| 人员检测标志 | - | `PEOPLEAVAILABLE = 0` | 人员可用性标志 |

## 7. 其他参数

| 参数 | Web端 | Python端 | 说明 |
|------|-------|----------|------|
| 计数器初始值 | - | `cnt_init = 0` | 初始化计数器 |
| 写入计数器 | - | `write_counter = 0` | 数据写入计数器 |
| 滑动条值 | - | `slider_value = 100` | UI滑动条默认值 |

## 总结

- **采样参数**: Web端固定50Hz采样率，Python端使用100Hz
- **心率参数**: Web端和Python端都使用5 bpm变化阈值和200个历史值缓冲，保持一致
- **缓冲区参数**: Web端有详细的BLE缓冲区管理参数，Python端相对简单
- **算法参数**: 主要集中在Python端的信号处理算法中
- **状态管理**: Python端有更多的状态标志用于控制程序流程

Web端更注重实时交互和BLE通信，而Python端更注重信号处理算法的参数配置。