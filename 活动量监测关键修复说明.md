# æ´»åŠ¨é‡ç›‘æµ‹æ¨¡å— - å…³é”®ä¿®å¤ (2026-01-27)

## ğŸ”§ ä¿®å¤çš„å…³é”®é—®é¢˜

### 1. æ­¥æ•°å¼‚å¸¸é«˜çš„é—®é¢˜ âœ…

**åŸå› åˆ†æ**:
- åŸç®—æ³•æ¯ç§’éƒ½åœ¨2ç§’çª—å£å†…é‡å¤è®¡ç®—æ­¥æ•°
- å³°å€¼æ£€æµ‹é˜ˆå€¼å¤ªä½ (0.05g)ï¼Œå¯¼è‡´å¤§é‡è¯¯æŠ¥
- æ²¡æœ‰è·Ÿè¸ªå·²å¤„ç†çš„æ•°æ®ï¼Œé€ æˆé‡å¤è®¡æ•°

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// 1. æ·»åŠ å¤„ç†ç´¢å¼•è·Ÿè¸ª
this.lastProcessedIndex = 0;  // è·Ÿè¸ªå·²å¤„ç†çš„æ•°æ®ä½ç½®

// 2. åªå¤„ç†æ–°æ•°æ®
if (currentLength - this.lastProcessedIndex >= this.fs) {
    // åªåœ¨æœ‰è¶³å¤Ÿæ–°æ•°æ®æ—¶æ‰è®¡ç®—æ­¥æ•°
    newSteps = this.countSteps(...);
    this.lastProcessedIndex = currentLength;
}

// 3. æé«˜å³°å€¼æ£€æµ‹é˜ˆå€¼
const minPeakHeight = 0.15;  // ä»0.05æé«˜åˆ°0.15
const minPeakDistance = Math.floor(this.fs / 3);  // é™åˆ¶æ¯ç§’æœ€å¤š3æ­¥
```

### 2. ENMOæ´»åŠ¨é‡å¼‚å¸¸é«˜çš„é—®é¢˜ âœ…

**åŸå› åˆ†æ**:
- åŸç®—æ³•è®¡ç®—çš„æ˜¯ENMOæ€»å’Œï¼Œè€Œä¸æ˜¯å¹³å‡å€¼
- æ¯ç§’ç´¯åŠ å¯¼è‡´æ•°å€¼å¿«é€Ÿå¢é•¿

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// ä¿®æ”¹å‰: è¿”å›æ€»å’Œ
return { enmo: enmoSum, ... };

// ä¿®æ”¹å: è¿”å›å¹³å‡å€¼
const enmo = enmoSum / n;  // è®¡ç®—å¹³å‡ENMO
return { enmo: enmo, ... };
```

**æ­£å¸¸å€¼å‚è€ƒ**:
- é™æ¯: ENMO < 0.05
- è½»åº¦æ´»åŠ¨: ENMO 0.05 - 0.15
- ä¸­åº¦æ´»åŠ¨: ENMO 0.15 - 0.30
- å‰§çƒˆæ´»åŠ¨: ENMO > 0.30

### 3. åœ†åœˆç™¾åˆ†æ¯”ä¸æ›´æ–°çš„é—®é¢˜ âœ…

**åŸå› åˆ†æ**:
- å…ƒç´ IDé”™è¯¯ï¼Œä½¿ç”¨äº†é”™è¯¯çš„DOMå…ƒç´ ID

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// ä¿®æ”¹å‰: ä½¿ç”¨äº†é”™è¯¯çš„ID
const stepsGoalEl = document.getElementById('activityStepsGoal');

// ä¿®æ”¹å: ä½¿ç”¨æ­£ç¡®çš„ID
const stepsPercentEl = document.getElementById('activityStepsPercent');
const enmoPercentEl = document.getElementById('activityENMOPercent');
```

### 4. å›¾è¡¨ä¸æ˜¾ç¤ºçš„é—®é¢˜ âœ…

**å·²æ·»åŠ çš„è°ƒè¯•åŠŸèƒ½**:
- å›¾è¡¨åˆå§‹åŒ–æ—¶è¾“å‡ºè¯¦ç»†æ—¥å¿—
- æ£€æŸ¥canvaså…ƒç´ æ˜¯å¦å­˜åœ¨
- æ•è·åˆå§‹åŒ–é”™è¯¯
- éªŒè¯å›¾è¡¨å¯¹è±¡åˆ›å»º

## ğŸ“Š é¢„æœŸæ•ˆæœ

### æ­¥æ•°ç»Ÿè®¡
**2åˆ†é’Ÿæµ‹è¯•**:
- é™æ¯çŠ¶æ€: 0-5æ­¥ (å¿ƒè·³å‘¼å¸ä¸ä¼šè¢«è®¡æ•°)
- æ…¢èµ°: 100-200æ­¥
- å¿«èµ°: 200-300æ­¥

### æ´»åŠ¨é‡ç»Ÿè®¡
**2åˆ†é’Ÿæµ‹è¯•**:
- é™æ¯çŠ¶æ€: ENMO < 5
- è½»åº¦æ´»åŠ¨: ENMO 5-15
- ä¸­åº¦æ´»åŠ¨: ENMO 15-30
- å‰§çƒˆæ´»åŠ¨: ENMO > 30

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
```
Cmd+Shift+R (Mac) æˆ– Ctrl+Shift+R (Windows)
```

### 2. é‡æ–°åŠ è½½é¡µé¢
```
http://localhost:8000/index.html
```

### 3. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°
æŒ‰ F12 æˆ– Cmd+Option+I

### 4. è¿æ¥è“ç‰™å¹¶å¯åŠ¨ç›‘æµ‹
1. ç‚¹å‡»"è¿æ¥è“ç‰™"
2. ç‚¹å‡»"å¼€å§‹æ´»åŠ¨ç›‘æµ‹"
3. è§‚å¯Ÿæ§åˆ¶å°è¾“å‡º

### 5. éªŒè¯è¾“å‡º

**å›¾è¡¨åˆå§‹åŒ–**:
```
ğŸ¨ åˆå§‹åŒ–æ´»åŠ¨ç›‘æµ‹å›¾è¡¨...
âœ… æ‰¾åˆ°æ­¥æ•°ç¯å½¢å›¾canvas
âœ… æ­¥æ•°ç¯å½¢å›¾åˆå§‹åŒ–æˆåŠŸ
âœ… æ‰¾åˆ°æ´»åŠ¨é‡ç¯å½¢å›¾canvas
âœ… æ´»åŠ¨é‡ç¯å½¢å›¾åˆå§‹åŒ–æˆåŠŸ
âœ… æ‰¾åˆ°æ¯å°æ—¶æ­¥æ•°å›¾canvas
âœ… æ¯å°æ—¶æ­¥æ•°å›¾åˆå§‹åŒ–æˆåŠŸ
âœ… æ‰¾åˆ°æ¯å°æ—¶æ´»åŠ¨é‡å›¾canvas
âœ… æ¯å°æ—¶æ´»åŠ¨é‡å›¾åˆå§‹åŒ–æˆåŠŸ
âœ… æ‰¾åˆ°æ´»åŠ¨å¼ºåº¦è¶‹åŠ¿å›¾canvas
âœ… æ´»åŠ¨å¼ºåº¦è¶‹åŠ¿å›¾åˆå§‹åŒ–æˆåŠŸ
ğŸ¨ å›¾è¡¨åˆå§‹åŒ–å®Œæˆï¼Œå·²åˆ›å»ºå›¾è¡¨æ•°é‡: 5
```

**æ•°æ®å¤„ç†** (é™æ¯çŠ¶æ€):
```
ğŸ“Š æ´»åŠ¨æŒ‡æ ‡: ENMO=0.0234, MAD=0.0123, å¼ºåº¦=resting, æ–°æ­¥æ•°=0
ğŸ“Š æ´»åŠ¨æŒ‡æ ‡: ENMO=0.0198, MAD=0.0145, å¼ºåº¦=resting, æ–°æ­¥æ•°=0
```

**æ­¥æ•°æ£€æµ‹** (æ´»åŠ¨æ—¶):
```
ğŸ‘£ æ£€æµ‹åˆ°æ­¥æ•°: +2, æ€»è®¡: 2
ğŸ‘£ æ£€æµ‹åˆ°æ­¥æ•°: +3, æ€»è®¡: 5
```

## âš ï¸ å¦‚æœå›¾è¡¨ä»ç„¶ä¸æ˜¾ç¤º

### æ£€æŸ¥1: Chart.jsæ˜¯å¦åŠ è½½
```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
console.log('Chart.js:', typeof Chart);
// åº”è¯¥è¾“å‡º: Chart.js: function
```

### æ£€æŸ¥2: Canvaså…ƒç´ æ˜¯å¦å­˜åœ¨
```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
console.log('æ­¥æ•°ç¯:', document.getElementById('activityStepsRingChart'));
console.log('æ´»åŠ¨é‡ç¯:', document.getElementById('activityENMORingChart'));
console.log('æ¯å°æ—¶æ­¥æ•°:', document.getElementById('activityHourlyStepsChart'));
console.log('æ¯å°æ—¶æ´»åŠ¨é‡:', document.getElementById('activityHourlyENMOChart'));
console.log('è¶‹åŠ¿å›¾:', document.getElementById('activityIntensityTrendChart'));
// åº”è¯¥éƒ½è¾“å‡º: <canvas id="..."></canvas>
```

### æ£€æŸ¥3: æ´»åŠ¨ç›‘æµ‹æ˜¯å¦å¯åŠ¨
```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
console.log('ç›‘æµ‹å™¨:', window.app.activityMonitor);
console.log('å·²å¯ç”¨:', window.app.activityMonitorEnabled);
console.log('å›¾è¡¨æ•°é‡:', Object.keys(window.app.activityMonitor.charts).length);
// åº”è¯¥è¾“å‡º: å›¾è¡¨æ•°é‡: 5
```

## ğŸ” è°ƒè¯•å‘½ä»¤

### æ‰‹åŠ¨è§¦å‘å›¾è¡¨æ›´æ–°
```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
if (window.app && window.app.activityMonitor) {
    window.app.activityMonitor.updateCharts();
    console.log('å›¾è¡¨å·²æ‰‹åŠ¨æ›´æ–°');
}
```

### æŸ¥çœ‹å½“å‰æ•°æ®
```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
if (window.app && window.app.activityMonitor) {
    const summary = window.app.activityMonitor.getSummary();
    console.log('å½“å‰æ•°æ®:', summary);
}
```

### é‡ç½®æ•°æ®
```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
if (window.app && window.app.activityMonitor) {
    window.app.activityMonitor.resetDailyData();
    console.log('æ•°æ®å·²é‡ç½®');
}
```

## ğŸ“ ç®—æ³•å‚æ•°

### æ­¥æ•°æ£€æµ‹å‚æ•°
```javascript
minPeakHeight = 0.15g      // æœ€å°å³°å€¼é«˜åº¦
minPeakDistance = fs/3     // æœ€å°æ­¥é—´è· (çº¦0.33ç§’)
windowSize = 2ç§’           // æ£€æµ‹çª—å£å¤§å°
```

### æ´»åŠ¨å¼ºåº¦é˜ˆå€¼
```javascript
resting:   MAD < 0.05g
light:     0.05g â‰¤ MAD < 0.12g
moderate:  0.12g â‰¤ MAD < 0.20g
vigorous:  MAD â‰¥ 0.20g
```

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

1. **è‡ªé€‚åº”é˜ˆå€¼**: æ ¹æ®ç”¨æˆ·çš„åŸºçº¿æ´»åŠ¨æ°´å¹³è‡ªåŠ¨è°ƒæ•´é˜ˆå€¼
2. **æ­¥æ€è¯†åˆ«**: åŒºåˆ†èµ°è·¯ã€è·‘æ­¥ã€è·³è·ƒç­‰ä¸åŒè¿åŠ¨æ¨¡å¼
3. **èƒ½é‡æ¶ˆè€—ä¼°ç®—**: åŸºäºENMOå’Œä½“é‡ä¼°ç®—å¡è·¯é‡Œæ¶ˆè€—
4. **å¼‚å¸¸æ£€æµ‹**: è¯†åˆ«è·Œå€’ã€å‰§çƒˆéœ‡åŠ¨ç­‰å¼‚å¸¸äº‹ä»¶

---

**ç‰ˆæœ¬**: 1.2.0
**æ›´æ–°æ—¶é—´**: 2026-01-27
**çŠ¶æ€**: å…³é”®é—®é¢˜å·²ä¿®å¤
