# ç¡çœ ç›‘æµ‹æŒ‰é’®æ‰‹åŠ¨æ˜¾ç¤ºè„šæœ¬

## é—®é¢˜

ç¡çœ ç›‘æµ‹æŒ‰é’®å­˜åœ¨äºHTMLä¸­ï¼Œä½†é»˜è®¤éšè—ï¼Œéœ€è¦è“ç‰™è¿æ¥åæ‰ä¼šè‡ªåŠ¨æ˜¾ç¤ºã€‚

## å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

### æ–¹æ³•1: åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼ˆæ¨èï¼‰

æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œå¤åˆ¶ç²˜è´´ä»¥ä¸‹ä»£ç å¹¶å›è½¦ï¼š

```javascript
// æ‰‹åŠ¨æ˜¾ç¤ºç¡çœ ç›‘æµ‹æŒ‰é’®
const sleepStartBtn = document.getElementById('sleepStartBtn');
if (sleepStartBtn) {
    sleepStartBtn.style.display = 'inline-block';
    console.log('âœ… ç¡çœ ç›‘æµ‹æŒ‰é’®å·²æ˜¾ç¤º');
} else {
    console.error('âŒ æ‰¾ä¸åˆ°ç¡çœ ç›‘æµ‹æŒ‰é’®');
}

// éªŒè¯æŒ‰é’®æ˜¯å¦å¯è§
setTimeout(() => {
    const btn = document.getElementById('sleepStartBtn');
    console.log('æŒ‰é’®æ˜¾ç¤ºçŠ¶æ€:', btn.style.display);
}, 100);
```

### æ–¹æ³•2: ä¿®æ”¹HTMLï¼ˆæ°¸ä¹…æ˜¾ç¤ºï¼‰

å¦‚æœä½ æƒ³è®©æŒ‰é’®å§‹ç»ˆå¯è§ï¼ˆä¸éœ€è¦è¿æ¥è“ç‰™ï¼‰ï¼Œå¯ä»¥ä¿®æ”¹HTMLï¼š

æ‰¾åˆ° `web/index.html` ç¬¬341è¡Œï¼Œå°†ï¼š
```html
<button class="btn btn-success" id="sleepStartBtn" onclick="startSleepMonitor()" style="display:none;">
```

æ”¹ä¸ºï¼š
```html
<button class="btn btn-success" id="sleepStartBtn" onclick="startSleepMonitor()" style="display:inline-block;">
```

### æ–¹æ³•3: ç¡®ä¿è“ç‰™è¿æ¥åè‡ªåŠ¨æ˜¾ç¤º

ç¡®ä¿ä»¥ä¸‹æ­¥éª¤ï¼š

1. **åˆ·æ–°é¡µé¢**ï¼ˆCmd+Shift+Rï¼‰
2. **è¿æ¥è“ç‰™**
3. **ç­‰å¾…2ç§’**
4. **æ£€æŸ¥æŒ‰é’®æ˜¯å¦å‡ºç°**

å¦‚æœè¿˜æ˜¯ä¸å‡ºç°ï¼Œåœ¨æ§åˆ¶å°æ‰§è¡Œï¼š
```javascript
// æ£€æŸ¥è“ç‰™è¿æ¥çŠ¶æ€
console.log('è“ç‰™è¿æ¥:', app.bleConnected);

// æ‰‹åŠ¨è§¦å‘æŒ‰é’®æ›´æ–°
app.updateBLEButtons();

// éªŒè¯æŒ‰é’®çŠ¶æ€
const btn = document.getElementById('sleepStartBtn');
console.log('æŒ‰é’®æ˜¾ç¤ºçŠ¶æ€:', btn ? btn.style.display : 'null');
```

## å®Œæ•´çš„å¯åŠ¨æµç¨‹

### æ­¥éª¤1: æ˜¾ç¤ºæŒ‰é’®
```javascript
document.getElementById('sleepStartBtn').style.display = 'inline-block';
```

### æ­¥éª¤2: ç‚¹å‡»æŒ‰é’®æˆ–æ‰‹åŠ¨å¯åŠ¨
```javascript
startSleepMonitor();
```

### æ­¥éª¤3: éªŒè¯å¯åŠ¨æˆåŠŸ
```javascript
console.log('ç¡çœ ç›‘æµ‹å¯ç”¨:', app.sleepMonitorEnabled);
console.log('ç¡çœ ç›‘æµ‹å®ä¾‹:', app.sleepMonitor ? 'å·²åˆ›å»º' : 'æœªåˆ›å»º');
```

### æ­¥éª¤4: ç­‰å¾…æ•°æ®
ç­‰å¾…6ç§’è®©æ•°æ®ç¼“å†²åŒºå¡«æ»¡ï¼ˆ300æ ·æœ¬@50Hzï¼‰

### æ­¥éª¤5: éªŒè¯æ•°æ®æµ
```javascript
if (app.sleepMonitor) {
    console.log('ç¼“å†²åŒºé•¿åº¦:', app.sleepMonitor.axBuffer.length);
    console.log('æ•°æ®æ›´æ–°æ¬¡æ•°:', app.sleepMonitor.dataUpdateCount);
}
```

## ä¸€é”®å¯åŠ¨è„šæœ¬

å¤åˆ¶ä»¥ä¸‹å®Œæ•´è„šæœ¬åˆ°æ§åˆ¶å°ï¼Œä¸€æ¬¡æ€§å®Œæˆæ‰€æœ‰æ“ä½œï¼š

```javascript
console.log('ğŸš€ å¯åŠ¨ç¡çœ ç›‘æµ‹...');

// 1. æ˜¾ç¤ºæŒ‰é’®
const sleepStartBtn = document.getElementById('sleepStartBtn');
if (sleepStartBtn) {
    sleepStartBtn.style.display = 'inline-block';
    console.log('âœ… æ­¥éª¤1: æŒ‰é’®å·²æ˜¾ç¤º');
} else {
    console.error('âŒ æ‰¾ä¸åˆ°æŒ‰é’®');
}

// 2. å¯åŠ¨ç¡çœ ç›‘æµ‹
setTimeout(() => {
    if (typeof startSleepMonitor === 'function') {
        startSleepMonitor();
        console.log('âœ… æ­¥éª¤2: ç¡çœ ç›‘æµ‹å·²å¯åŠ¨');
    } else {
        console.error('âŒ startSleepMonitorå‡½æ•°ä¸å­˜åœ¨');
    }
}, 500);

// 3. éªŒè¯å¯åŠ¨
setTimeout(() => {
    console.log('');
    console.log('=== éªŒè¯ç»“æœ ===');
    console.log('ç¡çœ ç›‘æµ‹å¯ç”¨:', app.sleepMonitorEnabled);
    console.log('ç¡çœ ç›‘æµ‹å®ä¾‹:', app.sleepMonitor ? 'å·²åˆ›å»º' : 'æœªåˆ›å»º');

    if (app.sleepMonitor) {
        console.log('âœ… ç¡çœ ç›‘æµ‹å¯åŠ¨æˆåŠŸï¼');
        console.log('ç­‰å¾…6ç§’è®©æ•°æ®ç¼“å†²åŒºå¡«æ»¡...');

        // 4. 6ç§’åæ£€æŸ¥æ•°æ®
        setTimeout(() => {
            console.log('');
            console.log('=== æ•°æ®çŠ¶æ€ ===');
            console.log('ç¼“å†²åŒºé•¿åº¦:', app.sleepMonitor.axBuffer.length);
            console.log('æ•°æ®æ›´æ–°æ¬¡æ•°:', app.sleepMonitor.dataUpdateCount);

            if (app.sleepMonitor.dataUpdateCount > 0) {
                const summary = app.sleepMonitor.getSummary();
                console.log('å½“å‰RMS:', summary.currentRMS.toFixed(4), 'g');
                console.log('æ•°æ®æ›´æ–°ç‡:', summary.dataRate.toFixed(2), 'Hz');
                console.log('âœ… æ•°æ®æµæ­£å¸¸ï¼');
            } else {
                console.log('âš ï¸ è¿˜åœ¨ç­‰å¾…æ•°æ®...');
            }
        }, 6000);
    } else {
        console.error('âŒ ç¡çœ ç›‘æµ‹å¯åŠ¨å¤±è´¥');
    }
}, 1000);
```

## è°ƒè¯•ä¿¡æ¯

å¦‚æœä¸Šè¿°æ–¹æ³•éƒ½ä¸è¡Œï¼Œè¯·æ‰§è¡Œä»¥ä¸‹è¯Šæ–­ï¼š

```javascript
console.log('=== å®Œæ•´è¯Šæ–­ ===');
console.log('');

// æ£€æŸ¥HTMLå…ƒç´ 
const btn = document.getElementById('sleepStartBtn');
console.log('1. æŒ‰é’®å…ƒç´ :');
console.log('  å­˜åœ¨:', btn !== null);
console.log('  æ˜¾ç¤ºçŠ¶æ€:', btn ? btn.style.display : 'null');
console.log('  å¯è§æ€§:', btn ? window.getComputedStyle(btn).display : 'null');
console.log('');

// æ£€æŸ¥å‡½æ•°
console.log('2. å‡½æ•°:');
console.log('  startSleepMonitor:', typeof startSleepMonitor);
console.log('  updateBLEButtons:', typeof app.updateBLEButtons);
console.log('');

// æ£€æŸ¥åº”ç”¨çŠ¶æ€
console.log('3. åº”ç”¨çŠ¶æ€:');
console.log('  appå­˜åœ¨:', typeof app !== 'undefined');
console.log('  è“ç‰™è¿æ¥:', app ? app.bleConnected : 'N/A');
console.log('  ç¡çœ ç›‘æµ‹å¯ç”¨:', app ? app.sleepMonitorEnabled : 'N/A');
console.log('');

// æ£€æŸ¥å…¶ä»–ç›‘æµ‹æŒ‰é’®
console.log('4. å…¶ä»–æŒ‰é’®çŠ¶æ€:');
const activityBtn = document.getElementById('activityStartBtn');
const restingBtn = document.getElementById('restingStartBtn');
console.log('  æ´»åŠ¨ç›‘æµ‹æŒ‰é’®:', activityBtn ? activityBtn.style.display : 'null');
console.log('  é™æ¯ç›‘æµ‹æŒ‰é’®:', restingBtn ? restingBtn.style.display : 'null');
```

---

**åˆ›å»ºæ—¶é—´**: 2026-01-28
**ç”¨é€”**: æ‰‹åŠ¨æ˜¾ç¤ºå’Œå¯åŠ¨ç¡çœ ç›‘æµ‹æŒ‰é’®
